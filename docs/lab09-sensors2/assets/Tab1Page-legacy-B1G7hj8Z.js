!function(){function e(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}System.register(["./index-legacy-By5IE_ss.js","./_plugin-vue_export-helper-legacy-BVIICed7.js"],function(t,s){"use strict";var a,n,i,r,o,l,c,d,u,p,h,v,m,w,f,g,b,y,k,E,x,L,O,S,T;return{setters:[e=>{a=e._,n=e.d,i=e.r,r=e.o,o=e.a,l=e.c,c=e.b,d=e.w,u=e.u,p=e.I,h=e.e,v=e.f,m=e.g,w=e.h,f=e.i,g=e.j,b=e.t,y=e.k,k=e.l,E=e.m,x=e.n,L=e.p,O=e.q,S=e.s},e=>{T=e._}],execute:function(){var P,M=document.createElement("style");M.textContent=".card[data-v-8457f1bc]{border:1px solid #ddd;border-radius:12px;padding:12px;margin-bottom:12px}.counter[data-v-8457f1bc]{text-align:center}.counter .label[data-v-8457f1bc]{font-size:14px;color:#666}.counter .num[data-v-8457f1bc]{font-size:48px;font-weight:700;margin-top:8px}.footer-text[data-v-8457f1bc]{text-align:center;font-size:12px;color:#666}\n/*$vite$:1*/",document.head.appendChild(M),function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(P||(P={}));class j extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const N=e=>{const t=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},a=s.Plugins=s.Plugins||{},n=()=>null!==t?t.name:(e=>{var t,s;return(null==e?void 0:e.androidBridge)?"android":(null===(s=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===s?void 0:s.bridge)?"ios":"web"})(e),i=e=>{var t;return null===(t=s.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},r=new Map;return s.convertFileSrc||(s.convertFileSrc=e=>e),s.getPlatform=n,s.handleError=t=>e.console.error(t),s.isNativePlatform=()=>"web"!==n(),s.isPluginAvailable=e=>{const t=r.get(e);return!!(null==t?void 0:t.platforms.has(n()))||!!i(e)},s.registerPlugin=(e,o={})=>{const l=r.get(e);if(l)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),l.proxy;const c=n(),d=i(e);let u;const p=a=>{let n;const i=(...i)=>{const r=(async()=>(!u&&c in o?u=u="function"==typeof o[c]?await o[c]():o[c]:null!==t&&!u&&"web"in o&&(u=u="function"==typeof o.web?await o.web():o.web),u))().then(t=>{const r=((t,a)=>{var n,i;if(!d){if(t)return null===(i=t[a])||void 0===i?void 0:i.bind(t);throw new j(`"${e}" plugin is not implemented on ${c}`,P.Unimplemented)}{const i=null==d?void 0:d.methods.find(e=>a===e.name);if(i)return"promise"===i.rtype?t=>s.nativePromise(e,a.toString(),t):(t,n)=>s.nativeCallback(e,a.toString(),t,n);if(t)return null===(n=t[a])||void 0===n?void 0:n.bind(t)}})(t,a);if(r){const e=r(...i);return n=null==e?void 0:e.remove,e}throw new j(`"${e}.${a}()" is not implemented on ${c}`,P.Unimplemented)});return"addListener"===a&&(r.remove=async()=>n()),r};return i.toString=()=>`${a.toString()}() { [capacitor code] }`,Object.defineProperty(i,"name",{value:a,writable:!1,configurable:!1}),i},h=p("addListener"),v=p("removeListener"),m=(e,t)=>{const s=h({eventName:e},t),a=async()=>{const a=await s;v({eventName:e,callbackId:a},t)},n=new Promise(e=>s.then(()=>e({remove:a})));return n.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()},n},w=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?m:h;case"removeListener":return v;default:return p(t)}}});return a[e]=w,r.set(e,{name:e,proxy:w,platforms:new Set([...Object.keys(o),...d?[c]:[]])}),w},s.Exception=j,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},C=(e=>e.Capacitor=N(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),I=C.registerPlugin;class A{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),s&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){const a=this.listeners[e];if(a)a.forEach(e=>e(t));else if(s){let s=this.retainedEventArguments[e];s||(s=[]),s.push(t),this.retainedEventArguments[e]=s}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new C.Exception(e,P.Unimplemented)}unavailable(e="not available"){return new C.Exception(e,P.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const a=s.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}t("W",A);const U=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),D=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class _ extends A{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[s,a]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=D(s).trim(),a=D(a).trim(),t[s]=a}),t}async setCookie(e){try{const t=U(e.key),s=U(e.value),a=e.expires?`; expires=${e.expires.replace("expires=","")}`:"",n=(e.path||"/").replace("path=",""),i=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${a}; path=${n}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}I("CapacitorCookies",{web:()=>new _});const R=(e,t={})=>{const s=Object.assign({method:e.method||"GET",headers:e.headers},t),a=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((s,a,n)=>(s[a]=e[t[n]],s),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)s.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[s,a]of Object.entries(e.data||{}))t.set(s,a);s.body=t.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,s)=>{t.append(s,e)});else for(const s of Object.keys(e.data))t.append(s,e.data[s]);s.body=t;const a=new Headers(s.headers);a.delete("content-type"),s.headers=a}else(a.includes("application/json")||"object"==typeof e.data)&&(s.body=JSON.stringify(e.data));return s};class $ extends A{async request(e){const t=R(e,e.webFetchExtra),s=((e,t=!0)=>e?Object.entries(e).reduce((e,s)=>{const[a,n]=s;let i,r;return Array.isArray(n)?(r="",n.forEach(e=>{i=t?encodeURIComponent(e):e,r+=`${a}=${i}&`}),r.slice(0,-1)):(i=t?encodeURIComponent(n):n,r=`${a}=${i}`),`${e}&${r}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=s?`${e.url}?${s}`:e.url,n=await fetch(a,t),i=n.headers.get("content-type")||"";let r,o,{responseType:l="text"}=n.ok?e:{};switch(i.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await n.blob(),r=await(async e=>new Promise((t,s)=>{const a=new FileReader;a.onload=()=>{const e=a.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},a.onerror=e=>s(e),a.readAsDataURL(e)}))(o);break;case"json":r=await n.json();break;default:r=await n.text()}const c={};return n.headers.forEach((e,t)=>{c[t]=e}),{data:r,headers:c,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}var W,F;I("CapacitorHttp",{web:()=>new $}),function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(W||(W={})),function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"}(F||(F={}));class B extends A{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}I("SystemBars",{web:()=>new B});const H=I("Motion",{android:()=>a(()=>s.import("./web-legacy-DhQAixQU.js"),void 0).then(e=>new e.MotionWeb),ios:()=>a(()=>s.import("./web-legacy-DhQAixQU.js"),void 0).then(e=>new e.MotionWeb),web:()=>a(()=>s.import("./web-legacy-DhQAixQU.js"),void 0).then(e=>new e.MotionWeb)});class G{constructor(){e(this,"remove",void 0)}async requestWebMotionPermissionIfNeeded(){const e=DeviceMotionEvent;if("function"==typeof(null==e?void 0:e.requestPermission)){if("granted"!==await e.requestPermission())throw new Error("Motion permission not granted")}}async start(e){if(C.isNativePlatform()){const t=await H.addListener("accel",t=>{var s,a,n;const i=t.accelerationIncludingGravity;i&&e({ax:null!==(s=i.x)&&void 0!==s?s:0,ay:null!==(a=i.y)&&void 0!==a?a:0,az:null!==(n=i.z)&&void 0!==n?n:0,t:Date.now()})});return void(this.remove=()=>t.remove())}await this.requestWebMotionPermissionIfNeeded();const t=t=>{var s,a,n;const i=t.accelerationIncludingGravity;i&&e({ax:null!==(s=i.x)&&void 0!==s?s:0,ay:null!==(a=i.y)&&void 0!==a?a:0,az:null!==(n=i.z)&&void 0!==n?n:0,t:Date.now()})};window.addEventListener("devicemotion",t),this.remove=()=>window.removeEventListener("devicemotion",t)}async stop(){var e;null===(e=this.remove)||void 0===e||e.call(this),this.remove=void 0}}class q{constructor(){e(this,"timer",void 0),e(this,"running",!1)}async start(e){this.running=!0;const t=Date.now();this.timer=window.setInterval(()=>{if(!this.running)return;const s=Date.now(),a=(s-t)/1e3,n=3.2*Math.sin(2.5*a),i=.3*Math.sin(1.3*a),r=.4*Math.cos(1.7*a);e({ax:i,ay:n,az:r,t:s})},80)}async stop(){this.running=!1,this.timer&&(window.clearInterval(this.timer),this.timer=void 0)}}var z;!function(e){e[e.Flush=0]="Flush",e[e.Add=1]="Add"}(z||(z={}));const K=I("TextToSpeech",{web:()=>a(()=>s.import("./web-legacy-DBzq0evZ.js"),void 0).then(e=>new e.TextToSpeechWeb)});class V{async speak(e){try{await K.speak({text:e,lang:"th-TH",rate:1})}catch(t){console.log("TTS not available in this environment:",t)}}async stop(){try{await K.stop()}catch(e){console.log("TTS stop not available:",e)}}}var J,Y;t("I",J),function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"}(J||t("I",J={})),t("N",Y),function(e){e.Success="SUCCESS",e.Warning="WARNING",e.Error="ERROR"}(Y||t("N",Y={}));const Q=I("Haptics",{web:()=>a(()=>s.import("./web-legacy-C-_Mtz9f.js"),void 0).then(e=>new e.HapticsWeb)});class X{webFallback(e){"vibrate"in navigator&&navigator.vibrate(e)}async success(){if(C.isNativePlatform())await Q.notification({type:Y.Success});else try{await Q.notification({type:Y.Success})}catch(e){console.log("Haptics success not available (web), fallback:",e),this.webFallback(20)}}async warning(){if(C.isNativePlatform())await Q.notification({type:Y.Warning});else try{await Q.notification({type:Y.Warning})}catch(e){console.log("Haptics warning not available (web), fallback:",e),this.webFallback([30,40,30])}}}class Z{constructor(){e(this,"listeners",new Set),e(this,"peak",-999),e(this,"valley",999),e(this,"phase","WAIT_UP"),e(this,"repStartTime",0),e(this,"sumRepMsOk",0),e(this,"state",{status:"IDLE",repDisplay:0,stats:{repsTotal:0,repsOk:0,repsBad:0,score:0,avgRepMs:0,lastMessage:"พร้อมเริ่ม"}})}onChange(e){return this.listeners.add(e),e(this.clone()),()=>this.listeners.delete(e)}emit(){const e=this.clone();this.listeners.forEach(t=>t(e))}clone(){return JSON.parse(JSON.stringify(this.state))}start(){this.state={status:"RUNNING",repDisplay:0,stats:{repsTotal:0,repsOk:0,repsBad:0,score:0,avgRepMs:0,lastMessage:"เริ่มได้เลย"}},this.phase="WAIT_UP",this.peak=-999,this.valley=999,this.repStartTime=0,this.sumRepMsOk=0,this.emit()}stop(){this.state.status="STOPPED",this.state.stats.lastMessage="หยุดการทำงาน",this.emit()}reset(){this.state.status="IDLE",this.state.repDisplay=0,this.state.stats={repsTotal:0,repsOk:0,repsBad:0,score:0,avgRepMs:0,lastMessage:"รีเซ็ตแล้ว"},this.phase="WAIT_UP",this.peak=-999,this.valley=999,this.repStartTime=0,this.sumRepMsOk=0,this.emit()}process(e){if("RUNNING"!==this.state.status)return;const t=e.ay,s=Math.abs(e.ax)+Math.abs(e.az);if(this.peak=Math.max(this.peak,t),this.valley=Math.min(this.valley,t),"WAIT_UP"!==this.phase){if(t<-1.5){const t=this.repStartTime>0?e.t-this.repStartTime:0,a=this.peak-this.valley;this.state.stats.repsTotal++;let n=!0,i="OK";a<3?(n=!1,i="ยกแขนต่ำเกินไป"):t<700?(n=!1,i="เร็วเกินไป"):t>3500?(n=!1,i="ช้าเกินไป"):s>5&&(n=!1,i="กรุณายกแนวตั้ง"),n?(this.state.repDisplay++,this.state.stats.repsOk++,this.state.stats.score++,this.sumRepMsOk+=t,this.state.stats.avgRepMs=Math.round(this.sumRepMsOk/this.state.stats.repsOk)):this.state.stats.repsBad++,this.state.stats.lastMessage=i,this.phase="WAIT_UP",this.peak=-999,this.valley=999,this.repStartTime=0,this.emit()}}else t>2&&(this.phase="WAIT_DOWN",this.repStartTime=e.t)}getPercentOk(){const e=this.state.stats.repsTotal;return 0===e?0:Math.round(this.state.stats.repsOk/e*100)}}const ee={class:"card"},te={class:"counter card"},se={class:"num"},ae={class:"card"},ne={class:"card"},ie=T(n({__name:"Tab1Page",setup(e){const t=i(null),s=i(!0),a=new Z,n=new G,T=new q,P=new V,M=new X;let j,N=0;r(()=>{j=a.onChange(async e=>{var s;e.repDisplay>N?(N=e.repDisplay,await P.speak((s=e.repDisplay,String(s))),await M.success()):e.stats.lastMessage&&"OK"!==e.stats.lastMessage&&"RUNNING"===e.status&&(await P.speak(e.stats.lastMessage),await M.warning()),t.value=e})}),o(async()=>{var e;null===(e=j)||void 0===e||e(),await n.stop(),await T.stop(),await P.stop()});const C=l(()=>{if(!t.value)return 0;const e=t.value.stats.repsTotal;return 0===e?0:Math.round(t.value.stats.repsOk/e*100)});async function I(){await P.speak("เริ่มกายบริหารแขน ยกขึ้นจนสุดแล้วลดลง"),N=0,a.start(),s.value?await T.start(e=>{console.log("mock sample",e),a.process(e)}):await n.start(e=>{console.log("real sample",e),a.process(e)})}async function A(){await n.stop(),await T.stop(),a.stop(),await P.speak("หยุดการทำงาน")}function U(){a.reset(),N=0}return(e,a)=>(S(),c(u(p),null,{default:d(()=>[h(u(f),null,{default:d(()=>[h(u(v),null,{default:d(()=>[h(u(m),null,{default:d(()=>[...a[1]||(a[1]=[w("Lab09 Arm Workout Sensors",-1)])]),_:1})]),_:1})]),_:1}),h(u(L),{class:"ion-padding"},{default:d(()=>{var e,n,i,r,o,l,c,p,v,m,f,L,O,S,T,P;return[g("div",ee,[a[2]||(a[2]=g("h2",null,"รหัสนักศึกษา: 673380245-4",-1)),a[3]||(a[3]=g("p",null,"ชื่อ: นางสาวศุภาฐิณี ซอสูงเนิน",-1)),g("p",null,"สถานะ: "+b(null===(e=t.value)||void 0===e?void 0:e.status),1)]),g("div",te,[a[4]||(a[4]=g("div",{class:"label"},"รอบที่นับได้ (ถูก)",-1)),g("div",se,b(null!==(n=null===(i=t.value)||void 0===i?void 0:i.repDisplay)&&void 0!==n?n:0),1)]),g("div",ae,[a[5]||(a[5]=g("h3",null,"สถิติ",-1)),g("p",null,"รอบทั้งหมด: "+b(null!==(r=null===(o=t.value)||void 0===o?void 0:o.stats.repsTotal)&&void 0!==r?r:0),1),g("p",null,"รอบถูก: "+b(null!==(l=null===(c=t.value)||void 0===c?void 0:c.stats.repsOk)&&void 0!==l?l:0),1),g("p",null,"รอบผิด: "+b(null!==(p=null===(v=t.value)||void 0===v?void 0:v.stats.repsBad)&&void 0!==p?p:0),1),g("p",null,"คะแนน: "+b(null!==(m=null===(f=t.value)||void 0===f?void 0:f.stats.score)&&void 0!==m?m:0),1),g("p",null,"Tempo เฉลี่ย (ms): "+b(null!==(L=null===(O=t.value)||void 0===O?void 0:O.stats.avgRepMs)&&void 0!==L?L:0),1),g("p",null,"Percent ถูก: "+b(C.value)+"%",1)]),g("div",ne,[a[6]||(a[6]=g("h3",null,"ข้อความล่าสุด",-1)),g("p",null,b(null!==(S=null===(T=t.value)||void 0===T?void 0:T.stats.lastMessage)&&void 0!==S?S:"-"),1)]),h(u(y),{expand:"block",onClick:I,disabled:"RUNNING"===(null===(P=t.value)||void 0===P?void 0:P.status)},{default:d(()=>[...a[7]||(a[7]=[w(" Start ",-1)])]),_:1},8,["disabled"]),h(u(y),{expand:"block",color:"medium",onClick:A},{default:d(()=>[...a[8]||(a[8]=[w(" Stop ",-1)])]),_:1}),h(u(y),{expand:"block",color:"warning",onClick:U},{default:d(()=>[...a[9]||(a[9]=[w(" Reset ",-1)])]),_:1}),h(u(k),{lines:"none",class:"ion-margin-top"},{default:d(()=>[h(u(E),null,{default:d(()=>[...a[10]||(a[10]=[w("โหมดทดสอบบนคอม (Mock Sensor)",-1)])]),_:1}),h(u(x),{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e)},null,8,["modelValue"])]),_:1})]}),_:1}),h(u(O),{class:"ion-padding footer-text"},{default:d(()=>[...a[11]||(a[11]=[w(" Lab09 - Ionic + Sensors ",-1)])]),_:1})]),_:1}))}}),[["__scopeId","data-v-8457f1bc"]]),re=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));t("T",re)}}})}();
